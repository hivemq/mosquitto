syntax = "proto3";
package hivemq.pulse.grpc;

import "informationmodel/relation.proto";
import "uuid.proto";

option java_multiple_files = true;
option java_package = "com.hivemq.pulse.agent.server.communication.message.proto";

/*
 * Based on:
 * https://protobuf.dev/programming-guides/style/
 * https://protobuf.dev/best-practices/dos-donts
 */

/*
 * A delta of a relation. We want to send deltas if an agent already has an information model in place.
 */
message RelationDeltaProto{

  /*
   * The identifier of the relation that is meant to be updated.
   *
   * required
   */
  UuidProto previous_identifier = 1;

  /*
   * The new relation which replaces (updates) the previous relation. For now, I decided to send the complete relation
   * and not deltas of all the changes. If a relation is deleted the value should be null (absent).
   */
  RelationProto updated_relation = 2;
}
